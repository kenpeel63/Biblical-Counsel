<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblical Counsel & Bible Reader - Steampunk Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: Georgia, serif; }
        .animate-spin-slow { animation: spin 4s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        select option { background-color: #1a1a1a; color: #fef3c7; }
    </style>
</head>
<body>
    <div id="app"></div>
<script>
        // STATE MANAGEMENT
        const state = {
            activeTab: 'counsel',
            selectedCategory: null,
            searchTerm: '',
            selectedBook: '',
            selectedChapter: '',
            bibleText: null,
            loading: false,
            error: null,
            currentDay: 1,
            completedDays: new Set(),
            selectedPlan: 'chronological',
            colorScheme: 'copper'
        };

        // COLOR SCHEMES
        const colorSchemes = {
            copper: { name: 'Brass & Copper', bg: 'from-amber-900 via-yellow-800 to-orange-900' },
            iron: { name: 'Iron & Steel', bg: 'from-gray-800 via-slate-700 to-zinc-800' },
            bronze: { name: 'Bronze & Gold', bg: 'from-yellow-900 via-amber-800 to-yellow-900' },
            emerald: { name: 'Emerald Engine', bg: 'from-emerald-900 via-green-800 to-teal-900' },
            burgundy: { name: 'Burgundy Steam', bg: 'from-red-900 via-rose-800 to-red-900' }
        };

        // BIBLE BOOKS
        const bibleBooks = {
            'Old Testament': [
                { name: 'Genesis', chapters: 50 }, { name: 'Exodus', chapters: 40 }, { name: 'Leviticus', chapters: 27 },
                { name: 'Numbers', chapters: 36 }, { name: 'Deuteronomy', chapters: 34 }, { name: 'Joshua', chapters: 24 },
                { name: 'Judges', chapters: 21 }, { name: 'Ruth', chapters: 4 }, { name: '1 Samuel', chapters: 31 },
                { name: '2 Samuel', chapters: 24 }, { name: '1 Kings', chapters: 22 }, { name: '2 Kings', chapters: 25 },
                { name: '1 Chronicles', chapters: 29 }, { name: '2 Chronicles', chapters: 36 }, { name: 'Ezra', chapters: 10 },
                { name: 'Nehemiah', chapters: 13 }, { name: 'Esther', chapters: 10 }, { name: 'Job', chapters: 42 },
                { name: 'Psalms', chapters: 150 }, { name: 'Proverbs', chapters: 31 }, { name: 'Ecclesiastes', chapters: 12 },
                { name: 'Song of Solomon', chapters: 8 }, { name: 'Isaiah', chapters: 66 }, { name: 'Jeremiah', chapters: 52 },
                { name: 'Lamentations', chapters: 5 }, { name: 'Ezekiel', chapters: 48 }, { name: 'Daniel', chapters: 12 },
                { name: 'Hosea', chapters: 14 }, { name: 'Joel', chapters: 3 }, { name: 'Amos', chapters: 9 },
                { name: 'Obadiah', chapters: 1 }, { name: 'Jonah', chapters: 4 }, { name: 'Micah', chapters: 7 },
                { name: 'Nahum', chapters: 3 }, { name: 'Habakkuk', chapters: 3 }, { name: 'Zephaniah', chapters: 3 },
                { name: 'Haggai', chapters: 2 }, { name: 'Zechariah', chapters: 14 }, { name: 'Malachi', chapters: 4 }
            ],
            'New Testament': [
                { name: 'Matthew', chapters: 28 }, { name: 'Mark', chapters: 16 }, { name: 'Luke', chapters: 24 },
                { name: 'John', chapters: 21 }, { name: 'Acts', chapters: 28 }, { name: 'Romans', chapters: 16 },
                { name: '1 Corinthians', chapters: 16 }, { name: '2 Corinthians', chapters: 13 }, { name: 'Galatians', chapters: 6 },
                { name: 'Ephesians', chapters: 6 }, { name: 'Philippians', chapters: 4 }, { name: 'Colossians', chapters: 4 },
                { name: '1 Thessalonians', chapters: 5 }, { name: '2 Thessalonians', chapters: 3 }, { name: '1 Timothy', chapters: 6 },
                { name: '2 Timothy', chapters: 4 }, { name: 'Titus', chapters: 3 }, { name: 'Philemon', chapters: 1 },
                { name: 'Hebrews', chapters: 13 }, { name: 'James', chapters: 5 }, { name: '1 Peter', chapters: 5 },
                { name: '2 Peter', chapters: 3 }, { name: '1 John', chapters: 5 }, { name: '2 John', chapters: 1 },
                { name: '3 John', chapters: 1 }, { name: 'Jude', chapters: 1 }, { name: 'Revelation', chapters: 22 }
            ]
        };
// CATEGORIES DATA
        const categories = [
            {
                id: 'anxiety',
                name: 'Anxiety & Worry',
                icon: 'üõ°Ô∏è',
                verses: [
                    { reference: 'Philippians 4:6-7', text: 'Do not be anxious about anything, but in every situation, by prayer and petition, with thanksgiving, present your requests to God. And the peace of God, which transcends all understanding, will guard your hearts and your minds in Christ Jesus.', context: 'Paul encourages believers to replace anxiety with prayer and thanksgiving, promising God\'s supernatural peace.' },
                    { reference: 'Matthew 6:25-34', text: 'Therefore I tell you, do not worry about your life... Look at the birds of the air; they do not sow or reap or store away in barns, and yet your heavenly Father feeds them. Are you not much more valuable than they?', context: 'Jesus teaches that worry is unnecessary when we trust in God\'s provision and seek His kingdom first.' },
                    { reference: '1 Peter 5:7', text: 'Cast all your anxiety on him because he cares for you.', context: 'We can confidently give God our worries because He genuinely cares about every detail of our lives.' }
                ],
                reflection: 'What specific worries can you surrender to God in prayer today?'
            },
            {
                id: 'guidance',
                name: 'Seeking Guidance',
                icon: 'üß≠',
                verses: [
                    { reference: 'Proverbs 3:5-6', text: 'Trust in the Lord with all your heart and lean not on your own understanding; in all your ways submit to him, and he will make your paths straight.', context: 'True guidance comes from trusting God completely rather than relying solely on our limited perspective.' },
                    { reference: 'James 1:5', text: 'If any of you lacks wisdom, you should ask God, who gives generously to all without finding fault, and it will be given to you.', context: 'God promises to provide wisdom to those who ask in faith, without judgment or hesitation.' }
                ],
                reflection: 'Are you actively seeking God\'s wisdom through prayer and Scripture for your current decisions?'
            },
            {
                id: 'relationships',
                name: 'Relationships & Conflict',
                icon: 'üë•',
                verses: [
                    { reference: 'Ephesians 4:32', text: 'Be kind and compassionate to one another, forgiving each other, just as in Christ God forgave you.', context: 'Our forgiveness of others should reflect the enormous forgiveness we\'ve received from God.' },
                    { reference: 'Colossians 3:13', text: 'Bear with each other and forgive one another if any of you has a grievance against someone. Forgive as the Lord forgave you.', context: 'Patience and forgiveness are essential for healthy relationships, modeled on Christ\'s forgiveness.' }
                ],
                reflection: 'Is there someone you need to forgive or reconcile with today?'
            },
            {
                id: 'strength',
                name: 'Need for Strength',
                icon: '‚ù§Ô∏è',
                verses: [
                    { reference: 'Isaiah 40:31', text: 'But those who hope in the Lord will renew their strength. They will soar on wings like eagles; they will run and not grow weary, they will walk and not be faint.', context: 'God promises supernatural strength and endurance to those who wait on Him and place their hope in Him.' },
                    { reference: 'Philippians 4:13', text: 'I can do all this through him who gives me strength.', context: 'Christ empowers us to face every challenge and circumstance we encounter.' }
                ],
                reflection: 'What situation requires you to depend on God\'s strength rather than your own today?'
            },
            {
                id: 'fear',
                name: 'Fear & Doubt',
                icon: 'üõ°Ô∏è',
                verses: [
                    { reference: '2 Timothy 1:7', text: 'For God has not given us a spirit of fear, but of power and of love and of a sound mind.', context: 'Fear doesn\'t come from God; He gives us power, love, and self-control instead.' },
                    { reference: 'Joshua 1:9', text: 'Have I not commanded you? Be strong and courageous. Do not be afraid; do not be discouraged, for the Lord your God will be with you wherever you go.', context: 'God\'s presence with us is the foundation for courage and the antidote to fear.' }
                ],
                reflection: 'What fears can you replace with trust in God\'s promises and presence?'
            },
            {
                id: 'purpose',
                name: 'Finding Purpose',
                icon: 'üí°',
                verses: [
                    { reference: 'Jeremiah 29:11', text: 'For I know the plans I have for you, declares the Lord, plans to prosper you and not to harm you, plans to give you hope and a future.', context: 'God has intentional, good plans for each person\'s life that include hope and a positive future.' },
                    { reference: 'Ephesians 2:10', text: 'For we are God\'s handiwork, created in Christ Jesus to do good works, which God prepared in advance for us to do.', context: 'Each person is uniquely created with a purpose and specific good works God has planned.' }
                ],
                reflection: 'How might God be using your current circumstances to fulfill His purpose in your life?'
            },
            {
                id: 'family',
                name: 'Family & Relationship Issues',
                icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',
                verses: [
                    { reference: 'Ephesians 6:1-4', text: 'Children, obey your parents in the Lord, for this is right. Honor your father and mother... Fathers, do not exasperate your children; instead, bring them up in the training and instruction of the Lord.', context: 'God establishes mutual responsibilities in families: children are to honor parents, and parents are to nurture children with patience and godly instruction.' },
                    { reference: 'Proverbs 15:1', text: 'A gentle answer turns away wrath, but a harsh word stirs up anger.', context: 'How we respond in family conflicts matters greatly. Gentleness can de-escalate tension, while harshness intensifies it.' }
                ],
                reflection: 'What step can you take today toward healing or strengthening a family relationship?'
            },
            {
                id: 'finances',
                name: 'Biblical Financial Wisdom',
                icon: 'üìñ',
                verses: [
                    { reference: 'Proverbs 22:7', text: 'The rich rule over the poor, and the borrower is slave to the lender.', context: 'Debt creates bondage and limits freedom. Scripture warns against the dangers of borrowing and encourages financial independence.' },
                    { reference: 'Proverbs 21:5', text: 'The plans of the diligent lead to profit as surely as haste leads to poverty.', context: 'Careful planning and patient diligence in financial matters lead to prosperity, while impulsive decisions often result in loss.' },
                    { reference: 'Malachi 3:10', text: 'Bring the whole tithe into the storehouse, that there may be food in my house. Test me in this, says the Lord Almighty, and see if I will not throw open the floodgates of heaven and pour out so much blessing that there will not be room enough to store it.', context: 'Giving to God first through tithing demonstrates trust and opens the door to His blessing and provision.' }
                ],
                reflection: 'Are you managing your finances according to biblical principles? What financial habit could you change today to honor God?'
            }
        ];

        // READING PLANS
        const plans = {
            chronological: { name: 'Chronological Reading Plan', days: 365, description: 'Read through the Bible in historical order' },
            newtestament: { name: 'New Testament Plan', days: 63, description: 'Read the entire New Testament in 63 days' },
            thematic: { name: 'Thematic Reading Plan', days: 52, description: 'Explore key biblical themes week by week' }
        };

        const sampleReadings = [
            { day: 1, readings: ['Genesis 1-3'], description: 'Creation and the Fall' },
            { day: 2, readings: ['Genesis 4-7'], description: 'Cain and Abel, Noah' },
            { day: 3, readings: ['Genesis 8-11'], description: 'The Flood, Tower of Babel' }
        ];
// FUNCTIONS
        function updateState(updates) {
            Object.assign(state, updates);
            render();
        }

        async function fetchBible() {
            if (!state.selectedBook || !state.selectedChapter) return;
            
            updateState({ loading: true, error: null });
            
            try {
                const response = await fetch(`https://bible-api.com/${encodeURIComponent(state.selectedBook)}+${state.selectedChapter}?translation=kjv`);
                if (!response.ok) throw new Error('Failed to fetch');
                const data = await response.json();
                updateState({ bibleText: data, loading: false });
            } catch (err) {
                updateState({ error: 'Unable to load Bible text. Please try again.', loading: false });
            }
        }

        function getFilteredCategories() {
            return categories.filter(cat =>
                cat.name.toLowerCase().includes(state.searchTerm.toLowerCase()) ||
                cat.verses.some(v => 
                    v.text.toLowerCase().includes(state.searchTerm.toLowerCase()) ||
                    v.reference.toLowerCase().includes(state.searchTerm.toLowerCase())
                )
            );
        }

        function toggleDay(day) {
            if (state.completedDays.has(day)) {
                state.completedDays.delete(day);
            } else {
                state.completedDays.add(day);
            }
            render();
        }

        function getProgress() {
            const total = plans[state.selectedPlan].days;
            return Math.round((state.completedDays.size / total) * 100);
        }

        // RENDER FUNCTION
        function render() {
            const theme = colorSchemes[state.colorScheme];
            const app = document.getElementById('app');
            
            app.innerHTML = `
                <div class="bg-gradient-to-br ${theme.bg} min-h-screen p-6">
                    <div class="max-w-6xl mx-auto">
                        ${renderHeader()}
                        ${renderColorSchemes()}
                        ${renderTabs()}
                        ${state.activeTab === 'counsel' ? renderCounsel() : ''}
                        ${state.activeTab === 'bible' ? renderBible() : ''}
                        ${state.activeTab === 'plan' ? renderPlan() : ''}
                    </div>
                </div>
            `;

            attachEventListeners();
        }

        function renderHeader() {
            return `
                <div class="text-center mb-8">
                    <div class="bg-black bg-opacity-30 backdrop-blur-sm rounded-lg p-6 border-4 border-double border-yellow-600">
                        <h1 class="text-5xl font-bold text-amber-50 tracking-wider">BIBLICAL COUNSEL</h1>
                        <div class="h-1 w-64 mx-auto my-3 bg-gradient-to-r from-transparent via-yellow-600 to-transparent"></div>
                        <p class="text-amber-50 text-lg tracking-wide">Wisdom from Scripture ¬∑ Powered by Divine Machinery</p>
                    </div>
                </div>
            `;
        }

        function renderColorSchemes() {
            return `
                <div class="mb-6 bg-black bg-opacity-40 backdrop-blur-sm rounded-lg shadow-2xl p-6 border-4 border-double border-yellow-700">
                    <label class="block text-amber-50 font-bold text-lg mb-3">APPARATUS COLORATION</label>
                    <div class="flex flex-wrap gap-3">
                        ${Object.entries(colorSchemes).map(([key, scheme]) => `
                            <button onclick="updateState({colorScheme: '${key}'})" 
                                class="px-6 py-3 rounded-lg font-bold border-2 ${state.colorScheme === key ? 'bg-yellow-600 text-black border-orange-500 scale-105' : 'bg-black bg-opacity-50 text-amber-50 border-gray-700'}">
                                ${scheme.name}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderTabs() {
            const tabs = [
                { id: 'counsel', label: 'TOPICAL COUNSEL' },
                { id: 'bible', label: 'SCRIPTURE VAULT' },
                { id: 'plan', label: 'READING ENGINE' }
            ];
            
            return `
                <div class="flex gap-3 mb-8 bg-black bg-opacity-40 rounded-lg p-3 border-2 border-yellow-800 overflow-x-auto">
                    ${tabs.map(tab => `
                        <button onclick="updateState({activeTab: '${tab.id}'})" 
                            class="py-4 px-8 rounded-lg font-bold border-2 whitespace-nowrap ${state.activeTab === tab.id ? 'bg-yellow-600 text-black border-orange-500' : 'bg-black bg-opacity-50 text-amber-50 border-gray-700'}">
                            ${tab.label}
                        </button>
                    `).join('')}
                </div>
            `;
        }
function renderCounsel() {
            const filtered = getFilteredCategories();
            
            if (state.selectedCategory) {
                return `
                    <div class="bg-black bg-opacity-60 rounded-lg p-8 border-4 border-double border-yellow-700">
                        <button onclick="updateState({selectedCategory: null})" class="mb-6 text-orange-500 hover:text-amber-50 font-bold text-lg">
                            ‚Üê Return to Archives
                        </button>
                        <h2 class="text-4xl font-bold text-amber-50 mb-6">${state.selectedCategory.icon} ${state.selectedCategory.name}</h2>
                        ${state.selectedCategory.verses.map(v => `
                            <div class="border-l-8 border-orange-500 pl-6 py-6 bg-black bg-opacity-40 rounded-r-lg mb-6">
                                <h3 class="font-bold text-orange-500 text-xl mb-4">${v.reference}</h3>
                                <p class="text-amber-50 text-lg italic mb-4">"${v.text}"</p>
                                <p class="text-amber-50 bg-black bg-opacity-30 p-4 rounded-lg">${v.context}</p>
                            </div>
                        `).join('')}
                        <div class="mt-8 p-6 bg-gradient-to-r from-black via-amber-900 to-black rounded-lg border-4 border-double border-orange-500">
                            <h3 class="font-bold text-orange-500 mb-3 text-xl">‚öô Reflection:</h3>
                            <p class="text-amber-50 text-lg italic">${state.selectedCategory.reflection}</p>
                        </div>
                    </div>
                `;
            }
            
            return `
                <div class="bg-black bg-opacity-60 rounded-lg p-8 border-4 border-double border-yellow-700">
                    <div class="mb-6">
                        <label class="block text-amber-50 font-bold mb-3">SEARCH THE ARCHIVES:</label>
                        <input type="text" id="searchInput" value="${state.searchTerm}" 
                            placeholder="Search by topic, verse, or keyword..."
                            class="w-full p-4 rounded-lg border-4 border-double border-gray-700 bg-black bg-opacity-60 text-amber-50 placeholder-amber-50 placeholder-opacity-50">
                        ${state.searchTerm ? `<p class="mt-2 text-amber-50 opacity-75">Found ${filtered.length} topics</p>` : ''}
                    </div>
                    <div class="grid md:grid-cols-2 gap-6">
                        ${filtered.map(cat => `
                            <button onclick="selectCategory('${cat.id}')" 
                                class="bg-black bg-opacity-60 p-8 rounded-lg border-4 border-double border-gray-700 hover:border-orange-500 text-left transform hover:scale-105 transition">
                                <div class="flex items-center gap-4 mb-3">
                                    <span class="text-4xl">${cat.icon}</span>
                                    <h2 class="text-2xl font-bold text-amber-50">${cat.name}</h2>
                                </div>
                                <p class="text-amber-50 opacity-75">${cat.verses.length} scriptures</p>
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        }
function renderBible() {
            return `
                <div class="bg-black bg-opacity-60 rounded-lg p-8 border-4 border-double border-yellow-700">
                    <h2 class="text-4xl font-bold text-amber-50 mb-6">üìñ SCRIPTURE VAULT</h2>
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="block text-amber-50 font-bold mb-3">Select Book:</label>
                            <select id="bookSelect" class="w-full p-4 border-4 border-double border-gray-700 rounded-lg bg-black bg-opacity-60 text-amber-50">
                                <option value="">Choose a book...</option>
                                ${Object.entries(bibleBooks).map(([testament, books]) => `
                                    <optgroup label="${testament}">
                                        ${books.map(book => `<option value="${book.name}" ${state.selectedBook === book.name ? 'selected' : ''}>${book.name}</option>`).join('')}
                                    </optgroup>
                                `).join('')}
                            </select>
                        </div>
                        <div>
                            <label class="block text-amber-50 font-bold mb-3">Select Chapter:</label>
                            <select id="chapterSelect" class="w-full p-4 border-4 border-double border-gray-700 rounded-lg bg-black bg-opacity-60 text-amber-50" ${!state.selectedBook ? 'disabled' : ''}>
                                <option value="">Choose chapter...</option>
                                ${state.selectedBook ? Array.from({length: [...bibleBooks['Old Testament'], ...bibleBooks['New Testament']].find(b => b.name === state.selectedBook)?.chapters || 0}, (_, i) => `
                                    <option value="${i+1}" ${state.selectedChapter == i+1 ? 'selected' : ''}>Chapter ${i+1}</option>
                                `).join('') : ''}
                            </select>
                        </div>
                    </div>
                    ${state.loading ? '<div class="text-center py-12"><div class="text-orange-500 text-2xl">‚öô Loading Scripture...</div></div>' : ''}
                    ${state.error ? `<div class="bg-red-900 bg-opacity-40 border-4 border-red-500 rounded-lg p-6 text-center"><p class="text-red-200 font-bold">${state.error}</p></div>` : ''}
                    ${state.bibleText && !state.loading ? `
                        <div class="bg-black bg-opacity-40 rounded-lg p-8 border-4 border-double border-orange-500">
                            <h3 class="text-3xl font-bold text-orange-500 mb-6">${state.bibleText.reference}</h3>
                            ${state.bibleText.verses.map(v => `
                                <p class="mb-4 text-amber-50 text-lg leading-relaxed">
                                    <span class="font-bold text-orange-500">${v.verse}</span> ${v.text}
                                </p>
                            `).join('')}
                            <div class="mt-6 pt-4 border-t-2 border-gray-700">
                                <p class="text-sm text-amber-50 opacity-75">Translation: King James Version (KJV)</p>
                            </div>
                        </div>
                    ` : ''}
                    ${!state.selectedBook && !state.bibleText ? `
                        <div class="text-center py-16 bg-black bg-opacity-40 rounded-lg border-4 border-double border-gray-700">
                            <div class="text-6xl mb-4">üìñ</div>
                            <p class="text-amber-50 text-xl">Select a book and chapter to begin</p>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function renderPlan() {
            const planInfo = plans[state.selectedPlan];
            const progress = getProgress();
            
            return `
                <div class="bg-black bg-opacity-60 rounded-lg p-8 border-4 border-double border-yellow-700">
                    <h2 class="text-4xl font-bold text-amber-50 mb-6">‚öô ${planInfo.name.toUpperCase()}</h2>
                    
                    <div class="mb-6">
                        <label class="block text-amber-50 font-bold mb-3">Choose Reading Engine:</label>
                        <select id="planSelect" class="w-full p-4 border-4 border-double border-gray-700 rounded-lg bg-black bg-opacity-60 text-amber-50">
                            <option value="chronological" ${state.selectedPlan === 'chronological' ? 'selected' : ''}>‚öô Chronological (365 days)</option>
                            <option value="newtestament" ${state.selectedPlan === 'newtestament' ? 'selected' : ''}>üìñ New Testament (63 days)</option>
                            <option value="thematic" ${state.selectedPlan === 'thematic' ? 'selected' : ''}>üîß Thematic (52 weeks)</option>
                        </select>
                    </div>

                    <div class="mb-6 p-6 bg-green-900 bg-opacity-60 rounded-lg border-4 border-double border-green-500">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-2xl font-bold text-green-200">PROGRESS MECHANISM</h3>
                            <span class="text-4xl font-bold text-green-300">${progress}%</span>
                        </div>
                        <div class="w-full bg-green-950 rounded-full h-8 mb-4 border-2 border-green-600">
                            <div class="bg-gradient-to-r from-green-500 to-emerald-400 h-8 rounded-full" style="width: ${progress}%"></div>
                        </div>
                        <div class="flex justify-between text-sm text-green-200">
                            <span>${state.completedDays.size} of ${planInfo.days} completed</span>
                            <span>${planInfo.days - state.completedDays.size} remaining</span>
                        </div>
                    </div>

                    <div class="grid gap-6">
                        ${sampleReadings.map(plan => {
                            const isCompleted = state.completedDays.has(plan.day);
                            return `
                                <div class="border-4 border-double rounded-lg p-6 ${isCompleted ? 'border-green-500 bg-green-900 bg-opacity-40' : 'border-gray-700 bg-black bg-opacity-40'}">
                                    <div class="flex items-center justify-between mb-4">
                                        <div class="flex items-center gap-4 flex-1">
                                            <div class="font-bold text-2xl rounded-full w-16 h-16 flex items-center justify-center border-4 ${isCompleted ? 'bg-green-600 text-white border-green-400' : 'bg-yellow-600 text-black border-orange-500'}">
                                                ${plan.day}
                                            </div>
                                            <div>
                                                <h3 class="text-2xl font-bold text-amber-50">${plan.description}</h3>
                                                <p class="text-amber-50 opacity-75">Day ${plan.day} of ${planInfo.days}</p>
                                            </div>
                                        </div>
                                        <button onclick="toggleDay(${plan.day})" class="px-6 py-3 rounded-lg font-bold border-2 ${isCompleted ? 'bg-green-600 text-white border-green-400' : 'bg-black bg-opacity-60 text-gray-300 border-gray-600'}">
                                            ${isCompleted ? '‚úì Completed' : 'Mark Complete'}
                                        </button>
                                    </div>
                                    <div class="space-y-3">
                                        <p class="font-bold text-orange-500">Today's Reading:</p>
                                        ${plan.readings.map(r => `
                                            <div class="bg-black bg-opacity-60 p-4 rounded-lg border-2 border-gray-700">
                                                <p class="text-amber-50 font-semibold">${r}</p>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }
function attachEventListeners() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', (e) => updateState({ searchTerm: e.target.value }));
            }

            const bookSelect = document.getElementById('bookSelect');
            if (bookSelect) {
                bookSelect.addEventListener('change', (e) => {
                    updateState({ selectedBook: e.target.value, selectedChapter: '', bibleText: null });
                });
            }

            const chapterSelect = document.getElementById('chapterSelect');
            if (chapterSelect) {
                chapterSelect.addEventListener('change', (e) => {
                    updateState({ selectedChapter: e.target.value });
                    fetchBible();
                });
            }

            const planSelect = document.getElementById('planSelect');
            if (planSelect) {
                planSelect.addEventListener('change', (e) => {
                    updateState({ selectedPlan: e.target.value, currentDay: 1 });
                });
            }
        }

        function selectCategory(id) {
            const category = categories.find(c => c.id === id);
            updateState({ selectedCategory: category });
        }

        // Make functions globally accessible
        window.updateState = updateState;
        window.selectCategory = selectCategory;
        window.toggleDay = toggleDay;

        // Initialize the app
        render();
    </script>
</body>
</html>

